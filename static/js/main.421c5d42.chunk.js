(this["webpackJsonpdragons-of-mugloar"]=this["webpackJsonpdragons-of-mugloar"]||[]).push([[0],{131:function(e,a,t){},190:function(e,a,t){},223:function(e,a,t){"use strict";t.r(a);var c=t(1),n=t.n(c),s=t(73),o=t.n(s),r=(t(190),t(70)),i=t(36),d=t(2),l=t.n(d),j=t(6),u="/dragons-of-mugloar/welcome",b="/dragons-of-mugloar/dashboard",h=(t(131),t(63)),m=t.n(h),g=t(291),O=t(55),p={apiKey:"AIzaSyCpm4tbF6QucaV00q8X-AzeGRrhJkz1W04",authDomain:"dragons-of-mugloar.firebaseapp.com",projectId:"dragons-of-mugloar",storageBucket:"dragons-of-mugloar.appspot.com",messagingSenderId:"393156094158",databaseURL:"https://dragons-of-mugloar-default-rtdb.europe-west1.firebasedatabase.app/",appId:"1:393156094158:web:1b71228d1c1f4d6321489f",measurementId:"G-V9RTGTVWG3"};O.a.initializeApp(p);var v=O.a.database(),f=t.p+"static/media/bg.1e01580a.jpeg",x=t.p+"static/media/logo.b88a4a34.png",w=t(8),N=function(){var e=new g.a;function a(){return(a=Object(j.a)(l.a.mark((function a(){var t,c,n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.post("https://dragonsofmugloar.com/api/v2/game/start");case 2:n=a.sent,e.remove("gameId"),e.set("gameId",null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.gameId,{path:"/"}),v.ref("data").update({gameId:null===n||void 0===n||null===(c=n.data)||void 0===c?void 0:c.gameId});case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var t={backgroundImage:"url(".concat(f,")")};return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{style:t,className:"wrapper",children:Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)("div",{className:"logo-wrapper",children:Object(w.jsx)("img",{src:x,alt:""})}),Object(w.jsxs)("h1",{className:"",children:["Welcome, Great Freelance Dragon Trainer!",Object(w.jsx)("br",{}),"Do you have a desire to use your dragon for profitable purposes? ",Object(w.jsx)("br",{}),'Then quickly click on the "New Game" and start making money on your dragon right now!']}),Object(w.jsx)("div",{className:"button-wrapper",children:Object(w.jsx)(r.b,{onClick:function(){return a.apply(this,arguments)},to:b,children:"New Game"})}),Object(w.jsxs)("div",{className:"copyright",children:["Copyright \xa9 2021. Drawings by Nele Sergejeva, editing Jaan Pullerits. ",Object(w.jsx)("br",{}),"Background photo by Sergei Akulich on Unsplash. All rights reserved."]})]})})})},y=t(11),k=t.p+"static/media/rexj-memoji-smile.148a0659.png";O.a.initializeApp(p);var S={},I=[],C=function(){var e=Object(c.useState)({}),a=Object(y.a)(e,2),t=a[0],n=a[1];Object(c.useEffect)((function(){O.a.database().ref("data").on("value",(function(e){n(e.val())})),console.log(I),console.log(t)}),[S]);var s={borderLeft:"1px solid rgba(224, 224, 224, 1)",paddingLeft:20};return I=[{header:"Gold",info:"Your earned amount of gold",data:t.gold},{header:"Lives",info:"Your remaining lives",data:t.lives,style:s},{header:"Turns",info:"Number of moves you made",data:t.turn,style:s},{header:"Score",info:"Your amount of points earned",data:t.score,style:s}],Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"welcome-back-wrapper",children:Object(w.jsxs)("div",{className:"welcome-back",children:[Object(w.jsx)("div",{className:"",children:Object(w.jsx)("img",{src:k,width:65})}),Object(w.jsxs)("div",{className:"",children:[Object(w.jsx)("b",{children:"Welcome Back,\xa0"}),"Brave Dragon Trainer!",Object(w.jsx)("div",{className:"question",children:"Are you ready to work today?"})]})]})}),Object(w.jsx)("div",{className:"quick-data-background",children:Object(w.jsx)("div",{className:"quick-data",children:I.map((function(e){return Object(w.jsx)("div",{style:e.style,className:"quick-data-item",children:Object(w.jsxs)("div",{className:"quick-data-info",children:[Object(w.jsx)("div",{className:"header",children:e.header}),Object(w.jsxs)("div",{className:"data-wrapper",children:[Object(w.jsx)("div",{className:"data",children:Object(w.jsx)("b",{children:e.data})}),Object(w.jsx)("div",{className:"icon"})]}),Object(w.jsx)("div",{className:"small-info",children:e.info})]})},e.header)}))})})]})},G=t(113),F=t(80),T=t(288),A=t(234),L=t(293),D=t(284),z=function(e){if("Game Over"!==e.status)return null===e||void 0===e||e.map((function(e){return e.id=e.adId,e})),console.log(e,"tasks"),e;console.log("Ggame OVer")};O.a.initializeApp(p);var P=[],H=function(){var e=(new g.a).get("gameId"),a=Object(c.useState)({}),t=Object(y.a)(a,2),n=t[0],s=t[1],o={};O.a.database().ref("data").on("value",(function(e){o=e.val().gameId}));var r=function(){fetch("https://dragonsofmugloar.com/api/v2/".concat(e,"/messages")).then((function(e){return e.json()})).then((function(e){p(e),"Game Over"===(null===e||void 0===e?void 0:e.status)&&(new g.a).remove("gameId"),console.log(e)})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){!function(e){O.a.database().ref("data").on("value",(function(a){e=a.val().gameId,console.log(e),s(e)}))}(),console.log(n),console.log(o),r(),z(h),console.log(e),console.log(o)}),[P]);var d=Object(c.useState)([]),b=Object(y.a)(d,2),h=b[0],p=b[1],f=Object(c.useState)(!1),x=Object(y.a)(f,2),N=x[0],k=x[1],S=Object(c.useState)(!1),I=Object(y.a)(S,2),H=I[0],R=I[1],Y=Object(c.useState)(1),q=Object(y.a)(Y,2),B=q[0],E=q[1],J=Object(i.g)(),V=[{field:"message",headerName:"Tasks",width:500},{field:"probability",headerName:"Probability",width:150},{field:"expiresIn",headerName:"Task expiration",width:150},{field:"reward",headerName:"Reward",width:100},{field:"action",headerName:"",sortable:!1,renderCell:function(a){var t=function(){var t=Object(j.a)(l.a.mark((function t(c){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.post("https://dragonsofmugloar.com/api/v2/".concat(e,"/solve/").concat(a.row.adId)).then((function(e){v.ref("data").update(e.data),R(e.data.success),E(e.data.lives)})).catch((function(e){console.log(e),console.log("blya")}));case 2:r(),c.stopPropagation(),k(!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsx)(F.a,{onClick:t,children:"Get task"})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(T.a,{open:N,onClose:function(){if(0===B){(new g.a).remove("gameId");var e={};O.a.database().ref("data").on("value",(function(a){e=a.val().score})),h.status="",v.ref("data").update({gold:0,level:0,lives:3,score:0,gameHighScore:e,gameId:"",turn:0}),J.push(u)}k(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(w.jsxs)(A.a,{className:"modal",children:[Object(w.jsx)(L.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:H?"Hurray!":"Oopss..."}),Object(w.jsx)(L.a,{id:"modal-modal-description",sx:{mt:2},children:H?" You successfully solved the task!":0===B?"You were defeated on your last mission!":"You failed the task!"})]})}),Object(w.jsx)(C,{}),Object(w.jsx)("h1",{children:"List of Tasks"}),Object(w.jsx)("div",{style:{height:400,width:"100%"},children:Object(w.jsx)(G.a,{LoadingOverlay:!0,rows:"Game Over"===h.status?[]:z(h),NoRowsOverlay:function(){return Object(w.jsx)("button",{children:"test"})},components:{NoRowsOverlay:function(){return Object(w.jsx)(D.a,{height:"100%",alignItems:"center",justifyContent:"center",children:Object(w.jsx)("button",{onClick:r(),children:"Tasks Fetch"})})}},columns:V,pageSize:5,disableColumnSelector:!0,disableSelectionOnClick:!0,rowsPerPageOptions:[5]})})]})},R=t(161),Y=(new g.a).get("gameId"),q=(new g.a).get("gameId"),B=function(){var e=Object(c.useState)(!1),a=Object(y.a)(e,2),t=a[0],n=a[1],s=Object(c.useState)([]),o=Object(y.a)(s,2),r=o[0],i=o[1],d=Object(c.useState)(!1),u=Object(y.a)(d,2),b=u[0],h=u[1],g=Object(R.a)("https://dragonsofmugloar.com/api/v2/".concat(q,"/shop")),O=Object(y.a)(g,2),p=O[0].data,f=O[1];Object(c.useEffect)((function(){fetch("https://dragonsofmugloar.com/api/v2/".concat(Y,"/shop")).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return alert(e)})).then((function(e){i(e)}))}),[]);var x=[{field:"name",headerName:"Item Name",width:150},{field:"cost",headerName:"Item Price",width:150},{field:"action",headerName:"Action",sortable:!1,renderCell:function(e){var a=function(){var a=Object(j.a)(l.a.mark((function a(t){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.post("https://dragonsofmugloar.com/api/v2/".concat(q,"/shop/buy/").concat(e.row.id)).then((function(e){v.ref("data").update(e.data);var a=Object.assign(e.data);console.log(a),h(e.data.shoppingSuccess),f()})).catch((function(e){console.log(e,"buying item error")}));case 2:t.stopPropagation(),n(!0);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(w.jsx)(F.a,{onClick:a,children:"Click"})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(T.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(w.jsxs)(A.a,{className:"modal",children:[Object(w.jsx)(L.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:b?"Hurray!":"Oopss..."}),Object(w.jsx)(L.a,{id:"modal-modal-description",sx:{mt:2},children:b?"You succesfully bought a new item from shop!":"You do not have enough money!"})]})}),Object(w.jsx)(C,{}),Object(w.jsx)("h1",{children:"Shopping list"}),Object(w.jsx)("div",{style:{height:400,width:"100%"},children:Object(w.jsx)(G.a,{LoadingOverlay:!0,rows:r===[]?p:r,columns:x,components:{NoRowsOverlay:function(){return Object(w.jsx)(D.a,{height:"100%",alignItems:"center",justifyContent:"center",children:Object(w.jsx)("button",{children:"Shop List Fetch"})})}},pageSize:5,disableColumnSelector:!0,disableSelectionOnClick:!0,rowsPerPageOptions:[5]})})]})},E=new g.a,J={},V=function(){var e=Object(c.useState)({}),a=Object(y.a)(e,2),t=a[0],n=a[1];console.log(E.get("highScore")),console.log(E.get("gameStats")),Object(c.useEffect)((function(){O.a.database().ref("data").on("value",(function(e){n(e.val())}))}),[J]);var s=[{text:"Game ID",data:E.get("gameId")},{text:"Lives",data:null===t||void 0===t?void 0:t.lives},{text:"Gold",data:null===t||void 0===t?void 0:t.gold},{text:"Level",data:null===t||void 0===t?void 0:t.level},{text:"Score",data:null===t||void 0===t?void 0:t.score},{text:"HighScore",data:void 0===(null===t||void 0===t?void 0:t.gameHighScore)?null===t||void 0===t?void 0:t.score:(null===t||void 0===t?void 0:t.gameHighScore)<t.score?t.score:t.gameHighScore},{text:"Turn",data:null===t||void 0===t?void 0:t.turn}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{children:"My Data"}),Object(w.jsx)("div",{className:"full-data-wrapper",children:s.map((function(e){return Object(w.jsxs)("div",{className:"full-data-item",children:[Object(w.jsxs)("div",{className:"data-header",children:[e.text," \xa0- \xa0"]}),Object(w.jsx)("div",{className:"data",children:e.data})]},e.text)}))})]})},W=t(290),M=t(285),U=t(286),K=t(287),Q=function(){var e=[{text:"Tasks List",icon:M.a,url:"".concat(b,"/tasks"),active:!0},{text:"Shop",icon:U.a,url:"".concat(b,"/shop")},{text:"Full Data",icon:K.a,url:"".concat(b,"/full-data")}];return Object(w.jsx)(c.Fragment,{children:Object(w.jsx)("ul",{children:e.map((function(e){var a=Object(i.h)(e);return Object(w.jsx)(W.a,{style:{padding:0,fontSize:17},button:!0,className:(null===a||void 0===a?void 0:a.isExact)?"active":"",component:r.c,to:e.url,activeClassName:"active",children:Object(w.jsxs)("div",{className:"item",children:[Object(w.jsx)(e.icon,{}),Object(w.jsx)("div",{className:"item-text",children:e.text})]})},e.url)}))})})},X=t.p+"static/media/icon-dragon-27.fca3793c.png",Z=function(){return Object(w.jsx)("div",{className:"sidebar",children:Object(w.jsxs)("div",{className:"sidebar-wrapper",children:[Object(w.jsx)("div",{className:"logo",children:Object(w.jsx)("img",{width:35,height:35,src:X,alt:""})}),Object(w.jsx)("div",{className:"brand",children:"DASHBOARD"}),Object(w.jsx)("div",{className:"links",children:Object(w.jsx)(Q,{})})]})})},$=function(e){var a=e.children;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"body-wrapper",children:a})})},_=function(){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"main-wrapper",children:[Object(w.jsx)(Z,{}),Object(w.jsx)($,{children:Object(w.jsxs)(i.d,{children:[Object(w.jsx)(i.b,{exact:!0,path:b,children:Object(w.jsx)(i.a,{to:"".concat(b,"/tasks")})}),Object(w.jsx)(i.b,{path:"".concat(b,"/tasks"),children:Object(w.jsx)(H,{})}),Object(w.jsx)(i.b,{path:"".concat(b,"/shop"),children:Object(w.jsx)(B,{})}),Object(w.jsx)(i.b,{path:"".concat(b,"/full-data"),children:Object(w.jsx)(V,{})})]})})]})})},ee=function(){return Object(w.jsx)(r.a,{children:Object(w.jsx)("div",{className:"container pt-4",children:Object(w.jsxs)(i.d,{children:[Object(w.jsx)(i.a,{exact:!0,from:"/",to:u}),Object(w.jsx)(i.a,{exact:!0,from:"/dragons-of-mugloar",to:u}),Object(w.jsx)(i.b,{path:u,children:Object(w.jsx)(N,{})}),Object(w.jsx)(i.b,{path:b,children:Object(w.jsx)(_,{})})]})})})};o.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(ee,{})}),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.421c5d42.chunk.js.map