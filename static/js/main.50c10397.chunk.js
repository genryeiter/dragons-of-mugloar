(this["webpackJsonpdragons-of-mugloar"]=this["webpackJsonpdragons-of-mugloar"]||[]).push([[0],{128:function(e,t,a){},186:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(72),s=a.n(r),i=(a(186),a(66)),o=a(36),d=a(2),l=a.n(d),u=a(6),j="/dragons-of-mugloar/welcome",b="/dragons-of-mugloar/dashboard",h=(a(128),a.p+"static/media/bg.1e01580a.jpeg"),m=a.p+"static/media/logo.b88a4a34.png",p=a(73),f=a.n(p),O=a(63),x={apiKey:"AIzaSyCpm4tbF6QucaV00q8X-AzeGRrhJkz1W04",authDomain:"dragons-of-mugloar.firebaseapp.com",projectId:"dragons-of-mugloar",storageBucket:"dragons-of-mugloar.appspot.com",messagingSenderId:"393156094158",databaseURL:"https://dragons-of-mugloar-default-rtdb.europe-west1.firebasedatabase.app/",appId:"1:393156094158:web:1b71228d1c1f4d6321489f",measurementId:"G-V9RTGTVWG3"};O.a.initializeApp(x);var v=O.a.database(),g=a(8),w=function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://dragonsofmugloar.com/api/v2/game/start");case 2:return t=e.sent,e.next=5,v.ref("data").update(null===t||void 0===t?void 0:t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t={backgroundImage:"url(".concat(h,")")};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{style:t,className:"wrapper",children:Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("div",{className:"logo-wrapper",children:Object(g.jsx)("img",{src:m,alt:""})}),Object(g.jsxs)("h1",{className:"",children:["Welcome, Great Freelance Dragon Trainer!",Object(g.jsx)("br",{}),"Do you have a desire to use your dragon for profitable purposes? ",Object(g.jsx)("br",{}),'Then quickly click on the "New Game" and start making money on your dragon right now!']}),Object(g.jsx)("div",{className:"button-wrapper",children:Object(g.jsx)(i.b,{to:b,onClick:function(){return e.apply(this,arguments)},children:"New Game"})}),Object(g.jsxs)("div",{className:"copyright",children:["Copyright \xa9 2021 German Eiter. Drawings by Nele Sergejeva, editing Jaan Pullerits. ",Object(g.jsx)("br",{}),"Background photo by Sergei Akulich on Unsplash. All rights reserved."]})]})})})},N=a(11),y=a.p+"static/media/rexj-memoji-smile.148a0659.png",k=a(271),S=a(272),I=a(273),C=a(274);O.a.initializeApp(x);var G=function(){var e=Object(c.useState)({}),t=Object(N.a)(e,2),a=t[0],n=t[1];Object(c.useEffect)((function(){O.a.database().ref("data").on("value",(function(e){n(e.val())}))}),[]);var r={borderLeft:"1px solid rgba(224, 224, 224, 1)",paddingLeft:20},s=[{header:"Gold",info:"Your earned amount of gold",data:a.gold,icon:k.a},{header:"Lives",info:"Your remaining lives",data:a.lives,icon:S.a,style:r},{header:"Turns",info:"Number of moves you made",data:a.turn,icon:I.a,style:r},{header:"Score",info:"Your amount of points earned",icon:C.a,data:a.score,style:r}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"welcome-back-wrapper",children:Object(g.jsxs)("div",{className:"welcome-back",children:[Object(g.jsx)("div",{className:"",children:Object(g.jsx)("img",{src:y,alt:"",width:65})}),Object(g.jsxs)("div",{className:"",children:[Object(g.jsx)("b",{children:"Welcome Back,\xa0"}),"Brave Dragon Trainer!",Object(g.jsx)("div",{className:"question",children:"Are you ready to work today?"})]})]})}),Object(g.jsx)("div",{className:"quick-data-background",children:Object(g.jsx)("div",{className:"quick-data",children:s.map((function(e){return Object(g.jsx)("div",{style:e.style,className:"quick-data-item",children:Object(g.jsxs)("div",{className:"quick-data-info",children:[Object(g.jsx)("div",{className:"header",children:e.header}),Object(g.jsxs)("div",{className:"data-wrapper",children:[Object(g.jsx)("div",{className:"data",children:Object(g.jsx)("b",{children:e.data})}),Object(g.jsx)("div",{className:"icon",children:Object(g.jsx)(e.icon,{})})]}),Object(g.jsx)("div",{className:"small-info",children:e.info})]})},e.header)}))})})]})},F=a(110),L=a(79),T=a(282),A=a(226),D=a(286),z=a(279),P=(a(143),function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=4;break}return e.next=3,f.a.get("https://dragonsofmugloar.com/api/v2/".concat(t,"/messages")).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=function(e){return null===e||void 0===e||e.map((function(e){return e.id=e.adId,e})),e},H=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t||void 0===a){e.next=4;break}return e.next=3,f.a.post("https://dragonsofmugloar.com/api/v2/".concat(t,"/solve/").concat(a)).then((function(e){return v.ref("data").update(e.data),e.data})).catch((function(){console.log("error")}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();O.a.initializeApp(x);var q=function(){var e=Object(c.useState)([]),t=Object(N.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)({}),s=Object(N.a)(r,2),o=s[0],d=s[1],b=Object(c.useState)(!1),h=Object(N.a)(b,2),m=h[0],p=h[1],f=Object(c.useState)(!1),O=Object(N.a)(f,2),x=O[0],w=O[1],y=Object(c.useState)(1),k=Object(N.a)(y,2),S=k[0],I=k[1];Object(c.useEffect)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ref("data").on("value",(function(e){w(e.val().success),I(e.val().lives),d(e.val().gameId),e.val().lives>0&&"You were defeated on your last mission!"!==e.val().message&&P(e.val().gameId).then((function(e){n(Y(e))}))}));case 2:case"end":return e.stop()}}),e)}))),[o]);var C=[{field:"message",headerName:"Tasks",width:500},{field:"probability",headerName:"Probability",width:150},{field:"expiresIn",headerName:"Task expiration",width:150},{field:"reward",headerName:"Reward",width:100},{field:"action",headerName:"",sortable:!1,renderCell:function(e){return Object(g.jsx)(L.a,{onClick:function(t){H(o,e.row.adId),t.stopPropagation(),p(!0)},children:"Get task"})}}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(T.a,{open:m,disableBackdropClick:!0,onClose:function(){var e={};S>0||(v.ref("data").on("value",(function(t){e=t.val().score})),v.ref("data").update({gameHighScore:e,message:""})),p(!(S>0))},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(g.jsxs)(A.a,{className:"modal",children:[Object(g.jsx)(D.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:x?" Hurray!":0===S?"Oops... You were defeated!":"Oops!"}),Object(g.jsx)(D.a,{id:"modal-modal-description",sx:{mt:2},children:x?" You successfully solved the task!":0===S?Object(g.jsx)(i.b,{className:"new-game",to:j,children:"New Game"}):"You failed the task!"})]})}),Object(g.jsx)(G,{}),Object(g.jsx)("h1",{children:"List of Tasks"}),Object(g.jsx)("div",{style:{height:400,width:"100%"},children:Object(g.jsx)(F.a,{LoadingOverlay:!0,rows:a===[]?[]:a,components:{NoRowsOverlay:function(){return Object(g.jsx)(z.a,{height:"100%",alignItems:"center",justifyContent:"center",children:Object(g.jsx)("button",{onClick:v.ref("data").update({message:""}),children:"Tasks Fetch"})})}},columns:C,pageSize:5,disableColumnSelector:!0,disableSelectionOnClick:!0,rowsPerPageOptions:[5]})})]})},B=function(e){if(""!==e)return f.a.get("https://dragonsofmugloar.com/api/v2/".concat(e,"/shop")).then((function(e){return e.data})).catch((function(){return console.log("error")}))},E=function(e,t){if(""!==e)return f.a.post("https://dragonsofmugloar.com/api/v2/".concat(e,"/shop/buy/").concat(t)).then((function(e){return v.ref("data").update(e.data),e.data})).catch((function(){return console.log("error")}))},R=function(){var e=Object(c.useState)(!1),t=Object(N.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)([]),s=Object(N.a)(r,2),i=s[0],o=s[1],d=Object(c.useState)(!1),j=Object(N.a)(d,2),b=j[0],h=j[1],m=Object(c.useState)({}),p=Object(N.a)(m,2),f=p[0],O=p[1];Object(c.useEffect)((function(){v.ref("data").on("value",(function(e){O(e.val().gameId),B(e.val().gameId).then((function(e){o(e)}))}))}),[f]);var x=[{field:"name",headerName:"Item Name",width:150},{field:"cost",headerName:"Item Price",width:150},{field:"action",headerName:"Action",sortable:!1,renderCell:function(e){var t=function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(f,e.row.id).then((function(e){h(e.shoppingSuccess),B(f).then((function(e){o(e)}))})),a.stopPropagation(),n(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsx)(L.a,{onClick:t,children:"Click"})}}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(T.a,{open:a,onClose:function(){return n(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(g.jsxs)(A.a,{className:"modal",children:[Object(g.jsx)(D.a,{id:"modal-modal-title",variant:"h6",component:"h2",children:b?"Hurray!":"Oops..."}),Object(g.jsx)(D.a,{id:"modal-modal-description",sx:{mt:2},children:b?"You successfully bought a new item from shop!":"You do not have enough money!"})]})}),Object(g.jsx)(G,{}),Object(g.jsx)("h1",{children:"Shopping list"}),Object(g.jsx)("div",{style:{height:400,width:"100%"},children:Object(g.jsx)(F.a,{LoadingOverlay:!0,rows:i,columns:x,components:{NoRowsOverlay:function(){return Object(g.jsx)(z.a,{height:"100%",alignItems:"center",justifyContent:"center",children:Object(g.jsx)("button",{children:"Shop List Fetch"})})}},pageSize:5,disableColumnSelector:!0,disableSelectionOnClick:!0,rowsPerPageOptions:[5]})})]})},J=function(){var e=Object(c.useState)({}),t=Object(N.a)(e,2),a=t[0],n=t[1];Object(c.useEffect)((function(){O.a.database().ref("data").on("value",(function(e){n(e.val())}))}),[]);var r=[{text:"Game ID",data:null===a||void 0===a?void 0:a.gameId},{text:"Lives",data:null===a||void 0===a?void 0:a.lives},{text:"Gold",data:null===a||void 0===a?void 0:a.gold},{text:"Level",data:null===a||void 0===a?void 0:a.level},{text:"Score",data:null===a||void 0===a?void 0:a.score},{text:"Last Game HighScore",data:void 0===(null===a||void 0===a?void 0:a.gameHighScore)?null===a||void 0===a?void 0:a.score:(null===a||void 0===a?void 0:a.gameHighScore)<a.score?a.score:a.gameHighScore},{text:"Turn",data:null===a||void 0===a?void 0:a.turn}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"My Data"}),Object(g.jsx)("div",{className:"full-data-wrapper",children:r.map((function(e){return Object(g.jsxs)("div",{className:"full-data-item",children:[Object(g.jsxs)("div",{className:"data-header",children:[e.text," \xa0- \xa0"]}),Object(g.jsx)("div",{className:"data",children:e.data})]},e.text)}))})]})},W=a(284),V=a(280),M=a(281),U=function(){var e=[{text:"Tasks List",icon:k.b,url:"".concat(b,"/tasks"),active:!0},{text:"Shop",icon:V.a,url:"".concat(b,"/shop")},{text:"Full Data",icon:M.a,url:"".concat(b,"/full-data")}];return Object(g.jsx)(c.Fragment,{children:Object(g.jsx)("ul",{children:e.map((function(e){var t=Object(o.g)(e);return Object(g.jsx)(W.a,{style:{padding:0,fontSize:17},button:!0,className:(null===t||void 0===t?void 0:t.isExact)?"active":"",component:i.b,to:e.url,activeClassName:"active",children:Object(g.jsxs)("div",{className:"item",children:[Object(g.jsx)(e.icon,{}),Object(g.jsx)("div",{className:"item-text",children:e.text})]})},e.url)}))})})},K=a.p+"static/media/icon-dragon-27.fca3793c.png",Q=function(){return Object(g.jsx)("div",{className:"sidebar",children:Object(g.jsxs)("div",{className:"sidebar-wrapper",children:[Object(g.jsx)("div",{className:"logo",children:Object(g.jsx)("img",{width:35,height:35,src:K,alt:""})}),Object(g.jsx)("div",{className:"brand",children:"DASHBOARD"}),Object(g.jsx)("div",{className:"links",children:Object(g.jsx)(U,{})})]})})},X=function(e){var t=e.children;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"body-wrapper",children:t})})},Z=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"main-wrapper",children:[Object(g.jsx)(Q,{}),Object(g.jsx)(X,{children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{exact:!0,path:b,children:Object(g.jsx)(o.a,{to:"".concat(b,"/tasks")})}),Object(g.jsx)(o.b,{path:"".concat(b,"/tasks"),children:Object(g.jsx)(q,{})}),Object(g.jsx)(o.b,{path:"".concat(b,"/shop"),children:Object(g.jsx)(R,{})}),Object(g.jsx)(o.b,{path:"".concat(b,"/full-data"),children:Object(g.jsx)(J,{})})]})})]})})},$=function(){return Object(g.jsx)(i.a,{children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.a,{exact:!0,from:"/",to:j}),Object(g.jsx)(o.a,{exact:!0,from:"/dragons-of-mugloar",to:j}),Object(g.jsx)(o.b,{path:j,children:Object(g.jsx)(w,{})}),Object(g.jsx)(o.b,{path:b,children:Object(g.jsx)(Z,{})})]})})};s.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)($,{})}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.50c10397.chunk.js.map